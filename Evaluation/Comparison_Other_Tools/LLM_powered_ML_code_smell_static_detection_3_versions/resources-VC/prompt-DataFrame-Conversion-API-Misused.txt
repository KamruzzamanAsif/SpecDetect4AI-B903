
---

### CODE SMELL DESCRIPTION

Use df.to_numpy() in Pandas instead of df.values() for transform a DataFrame to a NumPy array.
#### Context
In Pandas, df.to_numpy() and df.values() both can turn a DataFrame to a NumPy array.
#### Problem
As noted in (33), df.values() has an inconsistency problem. With .values() it is unclear whether the returned value would be the actual array, some transformation of it, or one of the Pandas custom arrays. However, the .values() API has not been not deprecated yet. Although the library developers note it as a warning in the documentation, it does not log a warning or error when compiling the code if we use .value().
#### Solution
When converting DataFrame to NumPy array, it is better to use df.to_numpy() than df.values().

---

### DETECTION METHODOLOGY

1.  Check if `pandas` is imported.
    
    -   `import pandas as pd`
        
    -   `from pandas import ...`
        
2.  If Pandas is imported:
    
    -   Search for any usage of `.values` on a DataFrame object.
        
        -   Pattern: `.values`
            
3.  If `.values` is used to extract data, mark as DataFrame Conversion API Misused.
    
4.  Expected alternative: use `.to_numpy()` instead.
    
5.  If Pandas is not imported, skip checking.

---

### INSTRUCTIONS
Identify all instances of the DataFrame Conversion API Misused code smell in the code file using the detection methodology above.

---

### OUTPUT FORMAT

You must return all the instances of the DataFrame Conversion API Misused code smell found as a json array of string. The json array contains the complete code line of each instance.

Something like this:

"instances": [
    {
        "code": "arr = df.values",
        "line": 30
    }
]

Respond with only the json array of the instances and of their corresponding lines (line number). Do not return anything else, not even an emoji or an okay. Return only the json array. Make sure you give a valid json array with no comments in it.

If no instance is found, return an empty json array like this : []